<html>

<head>
	<title>React JS - Functional</title>
	<link href="common/css/reset.css" rel="stylesheet" />
	<link href="common/css/style.css" rel="stylesheet" />
	<link href="common/css/media.css" rel="stylesheet" />
	
	<link rel="stylesheet" href="libs/tinymace/prism.css">
	
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
</head>

<body>
<div class="content" id="top">
<!--Write your content here-->
<h1>Next JS</h1>

<h2>Install</h2>
<div class="divBlock">
	<h3 id="h3-1">By react app</h3>
	<p>npm create react-app app-name --template next</p>

	<h3 id="h3-1">By next</h3>
	<p>npx create-next-app</p>
	<p>npm install</p>
	<p>npm run dev</p>
</div>

<h2>Pages routing</h2>
<div class="divBlock">
	<h3 id="h3-1">Filename</h3>
	<p>/ → pages/index.js</p>
	<p>/about → pages/about.js</p>
	<p>/blog/hello-world → pages/blog/[identifierId].js</p>
	
	<h3 id="h3-1">Folder file name as identifier</h3>
	<p>/any-title  →  pages/[identifierId]/index.js</p>
	<p>/any-title/view  →  pages/[identifierId]/view.js</p>
</div>

<h2>Link</h2>
<div class="divBlock">
	<pre><code class="language-javascript">import Link from 'next/link';

&lt;Link href="/">Home&lt;/Link></code></pre>
</div>

<h2>Layout</h2>
<div class="divBlock">
	<h3 id="h3-1">/components/layout.js</h3>
	<pre><code class="language-javascript">function Layout(props){
	return (
		&lt;div>
			&lt;nav>
				&lt;ul>
					&lt;li>Home&lt;/li>
					&lt;li>Account&lt;/li>
					&lt;li>Contact us&lt;/li>
				&lt;/ul>
			&lt;/nav>
			&lt;main>{props.children}&lt;/main>
		&lt;/div>
	)
}</code></pre>

	<h3 id="h3-1">global -> /pages/_app.js</h3>
	<pre><code class="language-javascript">import Layout from 'layout';
		
function MyApp({ Component, pageProps }) {
	return &lt;Layout>
		&lt;Component {...pageProps} />
	&lt;/Layout>;
}</code></pre>


	<h3 id="h3-1">or using individual page</h3>
	<pre><code class="language-javascript">import Layout from 'layout';

return {
	&lt;Layout>
		&lt;div>
			...
		&lt;/div>
	&lt;/Layout>
}</code></pre>
</div>

<h2>Pre-rendering Functions</h2>
<div class="divBlock">
	<h3 id="h3-1">getStaticProps</h3>
	<p>source: <a href="https://betterprogramming.pub/how-to-choose-data-fetching-strategies-in-nextjs-dadabf45e562">https://betterprogramming.pub/how-to-choose-data-fetching-strategies-in-nextjs-dadabf45e562</a></p>
	<p>To populate the data from api, let's say <b>list of products</b></p>
	<pre><code class="language-javascript">export default function Products(props) { ... }
		
export async function getStaticProps(context: GetStaticPropsContext) {
	const res = await fetch('http://localhost:3000/api/products')
	const products = await res.json()

	return {
		props: {
			products
		}
	};
}</code></pre>
	<p>To set a refresh interval api request, add the revalidate</p>
	<pre><code class="language-javascript">export default function Products(props) { ... }
		
export async function getStaticProps(context: GetStaticPropsContext) {
	const res = await fetch('http://localhost:3000/api/products')
	const products = await res.json()

	return {
		props: {
			products,
		},
		revalidate: 10, //every 10 seconds
	};
}</code></pre>

	<h3 id="h3-1">getStaticPaths</h3>
	<p>source: <a href="https://medium.com/@remoteupskill/understanding-getstaticpaths-in-next-js-in-under-5-mins-df0e09abd95e">https://medium.com/@remoteupskill/understanding-getstaticpaths-in-next-js-in-under-5-mins-df0e09abd95e</a></p>
	<p>Ginagamit natin ang getStaticPaths para sa mga pages tulad ng <b>productDetails</b> or <b>/product-details?id=1</b> na page</p>
	<p>at sa pamamagitan nito nakukuha natin ang detalye ng product at naveverify kung ito ay invalid id</p>
	
	
	
	<pre><code class="language-javascript">export default function ProductDetails(props) { ... }
	
export async function getStaticPaths() {
	//get products
	const res = await fetch('http://localhost:3000/api/products')
	const products = await res.json()
	
	//ger product id list
	const idList = products.map(product => product.id)

	//convert them into params
	const params = idList.map(id => ({params: {productId: id}}))
	
	return {
			fallback: 'blocking', 
			paths: params,
	};
}

export async function getStaticProps(context) {
	// we have the productId inside the params of context
	const {params} = context
	const productId = params.productId

	//use that productId to get details
	const res = await fetch('http://localhost:3000/api/productDetails?id=' + productId)
	const productDetails = await res.json()

	return {
			props: { productDetails }
	};
}

export default ProductDetails</code></pre>


	<p>If you call an api for products and you want to get the details of all products by there ID using api, thats where you can use getStaticPaths.</p>
	<pre><code class="language-javascript"></code></pre>

	<h3 id="h3-1">getServerSideProps</h3>
	<pre><code class="language-javascript"></code></pre>
</div>

<h2></h2>
<div class="divBlock">
	<h3 id="h3-1"></h3>
	<pre><code class="language-javascript"></code></pre>
</div>


<!--END write your content here-->
</div>
<p class="goTop"><a href="#top">TOP</a></p>
</body>

<script type="text/javascript" src="common/js/jquery.js"></script>
<script type="text/javascript" src="common/js/script.js"></script>
<script type="text/javascript" src="common/js/smooth_scrolling.js"></script>

<script src="libs/tinymace/prism.js"></script>

</html>