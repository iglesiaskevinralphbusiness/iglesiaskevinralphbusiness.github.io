<html>

<head>
	<title>React JS - Functional</title>
	<link href="common/css/reset.css" rel="stylesheet" />
	<link href="common/css/style.css" rel="stylesheet" />
	<link href="common/css/media.css" rel="stylesheet" />
	
	<link rel="stylesheet" href="libs/tinymace/prism.css">
	
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
</head>

<body>
<div class="content" id="top">
<!--Write your content here-->
<h1>React JS Functional</h1>

	
<h2>react-app-rewired</h2>
<div class="divBlock">
	<p>Import alias @</p>
	<h3 id="h3-1">Install react-app-rewired</h3>
	<pre><code class="language-javascript">npm install react-app-rewired --save-dev</code></pre>

	<h3 id="h3-1">Config</h3>
	<p>Create a <strong>config-overrides.js</strong> file in the root directory.</p>
	<pre><code class="language-javascript">const { alias } = require('react-app-rewire-alias');

module.exports = function override(config) {
	alias({
	'@': 'src/',
	})(config);

	return config;
};</code></pre>

	<h3 id="h3-1">Package</h3>
	<p>Update <strong>package.json</strong></p>
	<pre><code class="language-javascript">"scripts": {
	"start": "react-app-rewired start",
	"build": "react-app-rewired build",
	"test": "react-app-rewired test",
	"eject": "react-app-rewired eject"
},</code></pre>

	<h3 id="h3-1">Import</h3>
	<pre><code class="language-javascript">import Account from '@/components/account';</code></pre>
</div>

<h2>Structure</h2>
<div class="divBlock">
	<h3 id="h3-1">Constant</h3>
	<pre><code class="language-javascript">const Home = () => {
	...
}
export default Home;</code></pre>

	<h3 id="h3-1">Function</h3>
	<pre><code class="language-javascript">function Home(){
	...
}
export default Home;</code></pre>
</div>

<h2>Props</h2>
<div class="divBlock">
	<h3 id="h3-1">Parent</h3>
	<pre><code class="language-javascript">const items = [1, 2, 3];
let active = 1;
const handleUpdate = (val) => {
	active = val;
}
		
&lt;LISTING items="items" active="active" handleUpdate="handleUpdate" /&gt;</code></pre>

	<h3 id="h3-1">Child</h3>
	<pre><code class="language-javascript">function Listing({ items, active, handleUpdate }){
	&#x3C;button onClick={() =&#x3E; handleUpdate(2)}&#x3E;Click Here&#x3C;/button&#x3E;
}</code></pre>
</div>

<h2>Prop Types</h2>
<div class="divBlock">
	<h3 id="h3-1">Using prop types</h3>
	<pre><code class="language-javascript">import PropTypes from 'prop-types';

const Product = ({ image, name, price }) =>{
	...
}

Product.propTypes = {
	image: PropTypes.object.isRequired,
	name: PropTypes.string.isRequired,
	price: PropTypes.number.isRequired,
}

Product.defaultProps = { // it uses as default values when prop is empty
	name: 'default name',
	price: 0,
	image: {
		url: 'http://sameple.com/sample.png'
	}
}

export default Product;
	</code></pre>
</div>

<h2>Routing</h2>
<div class="divBlock">
	<h3 id="h3-1">Installation</h3>
	<p>npm install react-router-dom@6</p>

	<h3 id="h3-1">Layout</h3>
	<p>If you want to add layout page such as page with header menus applied to specific pages</p>
	<pre><code class="language-javascript">import { Outlet } from "react-router-dom";
import Header from "./components/header";

const Layout = () =&#x3E; {
	return &lt;&gt;
		&lt;Header &#47;&gt;
		&lt;Outlet &#47;&gt;
	&lt;&#47;&gt;
};
export default Layout;</code></pre>

	<h3 id="h3-1">Setup</h3>
	<pre><code class="language-javascript">import { BrowserRouter, Routes, Route } from 'react-router-dom';

import Layout from "./layouts/index";
import Home from "./views/home";
import Invoices from "./views/invoices";
import Products from "./views/Products";
import Product from "./views/product";
import NotFound from "./views/404.js";

function App(){
	return (
		&lt;BrowserRouter>
			&lt;Routes>
				&lt;Route path="/" element={&lt;Layout />}>
					&lt;Route index element={&lt;Home />} />
					&lt;Route path="invoices" element={&lt;Invoices />} />
					&lt;Route path="products" element={&lt;Products />} />
					&lt;Route path="products/:productId" element={&lt;Product />} />
				&lt;/Route>
				&lt;Route path="*" element={&lt;NotFound />} />
			&lt;/Routes>
		&lt;/BrowserRouter>
	)
}
</code></pre>

	<h3 id="h3-1">Accessing URL Parameters</h3>
	<pre><code class="language-javascript">import { useParams } from 'react-router-dom';
function SingleProduct(){
	const { productId } = useParams();
}
	</code></pre>
</div>

<h2>Hooks</h2>
<div class="divBlock">
	<h3 id="h3-1">UseState</h3>
	<pre><code class="language-javascript">import { useState } from 'react';
const [text, setText] = useState('lorem ipsum');</code></pre>

	<h3 id="h3-1">UseEffect</h3>
	<pre><code class="language-javascript">import { useEffect } from 'react';

// Run after every render / state update
useEffect(() => {
	console.log('Run after every render / state update');
});

// Run only in inital render / mounted
useEffect(() => {
	console.log('Run only in inital render / mounted');
}, []);

// Run only when specific state is change
const [text, setText] = useState('lorem ipsum');
useEffect(() => {
	console.log('Run only when specific state is change');
}, [text]);</code></pre>

	<h3 id="h3-1">useRef</h3>
	<pre><code class="language-javascript">import { useRef } from 'react';

// Accessing dom elements
const inputElement = useRef();
...
&lt;input type="text" ref={inputElement} />
...
inputElement.current.value</code></pre>
</div>

<h2>Forms</h2>
<div class="divBlock">
	<h3 id="h3-1">Model</h3>
	<pre><code class="language-javascript">const [fname, setFName] = useState('');
const [email, setEmail] = useState('');

&lt;input type="text" name="fname" value={fname} onChange={(e) &equals;> setFName(e.target.value) }/>
&lt;input type="text" name="email" value={email} onChange={(e) &equals;> setEmail(e.target.value) }/></code></pre>
</div>

<h2>Axios</h2>
<div class="divBlock">
	<p>npm install axios</p>

	<h3 id="h3-1">Setup Instance</h3>
	<p>config/axios.config.js</p>
	<pre><code class="language-javascript">import axios from 'axios';

const axiosConfig = axios.create({
	baseURL: 'https://course-api.com/',
	timeout: 20000,
	headers: {
		Accept: 'application/json'
	}
});

// request interceptor
HTTP.interceptors.request.use(
    (config) => config,
    (err) => Promise.reject(err)
);

// response interceptor
HTTP.interceptors.response.use(
    (response) => response,
    (error) => {
        if (error && !error.response) {
            HTTP.request(error.config);
        } else {
            const { status } = error.response;
            if (status === 401) {
                console.log('You are not autorize to access this page!');
            } else if (status === 404) {
                console.log('404 Api request not found!');
            }

            return Promise.reject(error.response);
        }
    }
);

export const HTTP = axios.create(axiosConfig);</code></pre>

	<h3 id="h3-1">Setup Services</h3>
	<p>services/index.js</p>
	<pre><code class="language-javascript">import { HTTP } from '../config/axios-config';

export const getRecipes = () => HTTP.get('/recipes/');
export const getRecipe = (id) => HTTP.get('/recipes/' + id);
export const addRecipe = (params) => HTTP.post('/recipes/', params);
export const updateRecipe = (id, params) => HTTP.put('/recipes/' + id, params);
export const deleteRecipe = (id) => HTTP.delete('/recipes/' + id);</code></pre>

	<h3 id="h3-1">Call Function Request</h3>
	<p>views/home.js</p>
	<pre><code class="language-javascript">import { getRecipe, addRecipe, updateRecipe } from '../services/services';

getRecipe(id).then((res) => {
	console.log(res);
}).catch((error) => {
	console.log(error);
});</code></pre>

</div>


<!--Last part-->

<h2>Redux Toolkit</h2>
<div class="divBlock">
	<h3 id="h3-1">Installation</h3>
	<p>npm install --save react-redux @reduxjs/toolkit</p>

	<h3 id="h3-1">Store</h3>
	<p>src/store/index.js</p>
	<pre><code class="language-javascript">import { configureStore } from '@reduxjs/toolkit';
import { combineReducers } from 'redux';
import user from './user';


const reducer = combineReducers({
	user,
});
const store = configureStore({
	reducer,
});
export default store;</code></pre>

	<p>index.js</p>
	<pre><code class="language-javascript">import { Provider } from 'react-redux';
import store from './store';
ReactDOM.render(
	&lt;Provider store={store}>
		&lt;App />
	&lt;/Provider>,
	document.getElementById('root');
)</code></pre>

	<h3 id="h3-1">Slice/Reducers/Actions</h3>
	<p>src/store/modules/user.js</p>
	<pre><code class="language-javascript">import { createSlice } from '@reduxjs/toolkit';

// Slice
const slice = createSlice({
	name: 'userModule',
	initialState: {
		user: null,
	},
	reducers: {
		LOGIN_SUCCESS: (state, action) => {
			state.user = action.payload;
		},
		LOGOUT_SUCCESS: (state, action) =>  {
			state.user = null;
		},
	},
});

export default slice.reducer;

// Actions
const { LOGIN_SUCCESS, LOGOUT_SUCCESS } = slice.actions
export const login = ({ username, password }) => async dispatch => {
	try {
		// const res = await api.post('/api/auth/login/', { username, password });
		dispatch(LOGIN_SUCCESS({username}));
	} catch (e) {
		return console.error(e.message);
	}
}
export const logout = () => async dispatch => {
	try {
		// const res = await api.post('/api/auth/logout/');
		return dispatch(LOGOUT_SUCCESS());
	} catch (e) {
		return console.error(e.message);
	}
}</code></pre>

	<h3 id="h3-1">Get Data</h3>
	<pre><code class="language-javascript">import { useSelector } from 'react-redux';

const { user } = useSelector(state => state.userModule);</code></pre>

	<h3 id="h3-1">Call Function</h3>
	<pre><code class="language-javascript">import { useDispatch } from 'react-redux';
import { login, logout } from './store/module/user';

const dispatch = useDispatch();

onClick="() => { dispatch(login({ username: '', password: '' })) }"
onClick="() => { dispatch(logout()) }"
</code></pre>

	<h3 id="h3-1">Async Thunk</h3>
	<p>src/store/modules/cart.js</p>
	<pre><code class="language-javascript">import { createAsyncThunk } from '@reduxjs/toolkit';
		
const initialState = {
	items: [],
	isLoading: true
}

const cartSlice = createSlice({
	name: 'cart',
	initialState,
	reduces: {
		...
	},
	extraReducers: {
		[getCartItems.pending]: (state) => {
			state.isLoading = true;
		},
		[getCartItems.fulfilled]: (state, action) => {
			state.isLoading = true;
			state.items = action.payload;
		},
		[getCartItems.rejected]: (state) => {
			state.isLoading = false;
		},
	}
});

// Async Thunks
export const getCartItems = createAsyncThunk('cart/getCartItems', ()=> {
	return fetch(url)
		.then((resp) => resp.json())
		.catch((error) => console.log(err));
});</code></pre>

	<p>src/components/cart.js</p>
	<pre><code class="language-javascript">import { useDispatch } from 'react-redux';
import { getCartItems } from './store/module/cart';


const dispatch = useDispatch();

useEffect(() => {
	dispatch(getCartItems());
});</code></pre>


	<h3 id="h3-1">Axios Async Thunk</h3>
	<p>npm install axios</p><br>

	<p>src/store/modules/cart.js</p>
	<pre><code class="language-javascript">import axios from 'axios';

export const  getCartItems = createAsyncThunk('cart/getCartItems', async (thunkAPI) => {
	// thunkAPI is function enable to get state, dispatch, ect. try to console log the thunkAPI varaible to see.
	// can add function parameter before thunkAPI (ex. id, thunkAPI).
	try {
		const resp = await axios(url);
		return resp.data;
	} catch (error) {
		return thunkAPI.rejectWithValue('something went wrong');
	}
});


...
[getCartItems.rejected]: (state, action) => {
	console.log(action);
	state.isLoading = false;
},
...</code></pre>
</div>



<!--END write your content here-->
</div>
<p class="goTop"><a href="#top">TOP</a></p>
</body>

<script type="text/javascript" src="common/js/jquery.js"></script>
<script type="text/javascript" src="common/js/script.js"></script>
<script type="text/javascript" src="common/js/smooth_scrolling.js"></script>

<script src="libs/tinymace/prism.js"></script>

</html>